function pushy_init(){$(function(){function e(){i.toggleClass(c),a.toggleClass(l),o.toggleClass(d),s.toggleClass(u)}function t(){i.addClass(c),a.animate({left:"0px"},h),o.animate({left:m},h),s.animate({left:m},h)}function n(){i.removeClass(c),a.animate({left:"-"+m},h),o.animate({left:"0px"},h),s.animate({left:"0px"},h)}var a=$(".pushy"),i=$("body"),o=$("#container"),s=$(".push"),r=$(".site-overlay"),l="pushy-left pushy-open",c="pushy-active",d="container-push",u="push-push",f=$(".navicon-button, .pushy a"),h=200,m=a.width()+"px";if(cssTransforms3d=function(){var e=document.createElement("p"),t=!1,n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var a in n)e.style[a]!==undefined&&(e.style[a]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[a]));return document.body.removeChild(e),t!==undefined&&t.length>0&&"none"!==t}(),cssTransforms3d)f.click(function(){e(),$(".navicon-button > .navicon").toggleClass("x")}),r.click(function(){e(),$(".navicon-button > .navicon").toggleClass("x")});else{a.css({left:"-"+m}),o.css({"overflow-x":"hidden"});var p=!0;f.click(function(){p?(t(),p=!1):(n(),p=!0),$(".navicon-button > .navicon").toggleClass("x")}),r.click(function(){p?(t(),p=!1):(n(),p=!0)})}})}function debounce(e,t,n){var a,i,o,s,r;return function(){o=this,i=arguments,s=new Date;var l=function(){var c=new Date-s;c<t?a=setTimeout(l,t-c):(a=null,n||(r=e.apply(o,i)))},c=n&&!a;return a||(a=setTimeout(l,t)),c&&(r=e.apply(o,i)),r}}
// Copyright (C) 2011 by Will Tomlins
// The above copyright notice and this permission notice shall be included in
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
function humanized_time_span(e,t,n,a){function i(){for(var e=0;e<n[c].length;e++)if(null==n[c][e].ceiling||l<=n[c][e].ceiling)return n[c][e];return null}function o(){for(var e=l,t={},n=0;n<a.length;n++){var i=Math.floor(e/a[n][0]);e-=a[n][0]*i,t[a[n][1]]=i}return t}function s(e){var t=o();return r(e.text.replace(/\$(\w+)/g,function(){return t[arguments[1]]}),t)}function r(e,t){for(var n in t)if(1==t[n]){var a=new RegExp("\\b"+n+"\\b");e=e.replace(a,function(){return arguments[0].replace(/s\b/g,"")})}return e}n=n||{past:[{ceiling:60,text:"$seconds seconds ago"},{ceiling:3600,text:"$minutes minutes ago"},{ceiling:86400,text:"$hours hours ago"},{ceiling:2629744,text:"$days days ago"},{ceiling:31556926,text:"$months months ago"},{ceiling:null,text:"$years years ago"}],future:[{ceiling:60,text:"in $seconds seconds"},{ceiling:3600,text:"in $minutes minutes"},{ceiling:86400,text:"in $hours hours"},{ceiling:2629744,text:"in $days days"},{ceiling:31556926,text:"in $months months"},{ceiling:null,text:"in $years years"}]},a=a||[[31556926,"years"],[2629744,"months"],[86400,"days"],[3600,"hours"],[60,"minutes"],[1,"seconds"]],e=new Date(e),t=t?new Date(t):new Date;var l=(t-e)/1e3,c="past";return l<0&&(c="future",l=0-l),s(i())}function scrollTo(e){console.log("scrollTo",e),$("html, body").stop().animate({scrollTop:$(e).offset().top},500,"easeInOutExpo")}var IS_FIREFOX=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,IS_SAFARI_IOS_7=navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*OS 7_\d/i),IS_ANDROID_MOBILE=/(android)/i.test(navigator.userAgent.toLowerCase())&&/(mobile)/i.test(navigator.userAgent.toLowerCase());!function(){var e,t=0,n=["ms","moz","webkit","o"];for(e=0;e<n.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[n[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[e]+"CancelAnimationFrame"]||window[n[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),a=Math.max(0,16-(n-t)),i=window.setTimeout(function(){e(n+a)},a);return t=n+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)})}(),function(e,t,n,a){"use strict";function i(t,n){this.element=t;var a={};e.each(e(this.element).data(),function(e,t){var n=function(e){return e&&e[0].toLowerCase()+e.slice(1)},i=n(e.replace("fluidbox",""));(""!==i||null!==i)&&("false"==t?t=!1:"true"==t&&(t=!0),a[i]=t)}),this.settings=e.extend({},l,n,a),this.settings.viewportFill=Math.max(Math.min(parseFloat(this.settings.viewportFill),1),0),this.settings.stackIndex<this.settings.stackIndexDelta&&(settings.stackIndexDelta=settings.stackIndex),this._name=r,this.init()}var o=e(t),s=e(n),r="fluidbox",l={immediateOpen:!1,loader:!1,maxWidth:0,maxHeight:0,resizeThrottle:500,stackIndex:1e3,stackIndexDelta:10,viewportFill:.95},c={},d=0;("undefined"==typeof console||"undefined"===console.warn)&&(console={},console.warn=function(){}),e.isFunction(e.throttle)||console.warn("Fluidbox: The jQuery debounce/throttle plugin is not found/loaded. Even though Fluidbox works without it, the window resize event will fire extremely rapidly in browsers, resulting in significant degradation in performance upon viewport resize.");var u=function(){var e,t=n.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(t.style[e]!==a)return i[e]},f=u(),h={dom:function(){var t=e("<div />",{"class":"fluidbox__wrap",css:{zIndex:this.settings.stackIndex-this.settings.stackIndexDelta}});if(e(this.element).addClass("fluidbox--closed").wrapInner(t).find("img").first().css({opacity:1}).addClass("fluidbox__thumb").after('<div class="fluidbox__ghost" />'),this.settings.loader){var n=e("<div />",{"class":"fluidbox__loader",css:{zIndex:2}});e(this.element).find(".fluidbox__wrap").append(n)}},prepareFb:function(){var t=this,n=e(this.element);n.trigger("thumbloaddone.fluidbox"),h.measure.fbElements.call(this),t.bindEvents(),n.addClass("fluidbox--ready"),t.bindListeners(),n.trigger("ready.fluidbox")},measure:{viewport:function(){c.viewport={w:o.width(),h:o.height()}},fbElements:function(){var t=this,n=e(this.element),a=n.find("img").first(),i=n.find(".fluidbox__ghost"),o=n.find(".fluidbox__wrap");t.instanceData.thumb={natW:a[0].naturalWidth,natH:a[0].naturalHeight,w:a.width(),h:a.height()},i.css({width:a.width(),height:a.height(),top:a.offset().top-o.offset().top+parseInt(a.css("borderTopWidth"))+parseInt(a.css("paddingTop")),left:a.offset().left-o.offset().left+parseInt(a.css("borderLeftWidth"))+parseInt(a.css("paddingLeft"))})}},checkURL:function(e){var t=0;return/[\s+]/g.test(e)?(console.warn("Fluidbox: Fluidbox opening is halted because it has detected characters in your URL string that need to be properly encoded/escaped. Whitespace(s) have to be escaped manually. See RFC3986 documentation."),t=1):/[\"\'\(\)]/g.test(e)&&(console.warn("Fluidbox: Fluidbox opening will proceed, but it has detected characters in your URL string that need to be properly encoded/escaped. These will be escaped for you. See RFC3986 documentation."),t=0),t},formatURL:function(e){return e.replace(/"/g,"%22").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}};e.extend(i.prototype,{init:function(){var t=this,n=e(this.element),a=n.find("img").first();if(h.measure.viewport(),(!t.instanceData||!t.instanceData.initialized)&&n.is("a")&&1===n.children().length&&(n.children().is("img")||n.children().is("picture")&&1===n.find("img").length)&&"none"!==n.css("display")&&"none"!==n.children().css("display")&&"none"!==n.parents().css("display")){n.removeClass("fluidbox--destroyed"),t.instanceData={},t.instanceData.initialized=!0,t.instanceData.originalNode=n.html(),d+=1,t.instanceData.id=d,n.addClass("fluidbox__instance-"+d),n.addClass("fluidbox--initialized"),h.dom.call(t),n.trigger("init.fluidbox");var i=new Image;a.width()>0&&a.height()>0?h.prepareFb.call(t):(i.onload=function(){h.prepareFb.call(t)},i.onerror=function(){n.trigger("thumbloadfail.fluidbox")},i.src=a.attr("src"))}},open:function(){var t=this,n=e(this.element),a=n.find("img").first(),i=n.find(".fluidbox__ghost"),o=n.find(".fluidbox__wrap");t.instanceData.state=1,i.off(f),e(".fluidbox--opened").fluidbox("close");var s=e("<div />",{"class":"fluidbox__overlay",css:{zIndex:-1}});if(o.append(s),n.removeClass("fluidbox--closed").addClass("fluidbox--loading"),h.checkURL(a.attr("src")))return t.close(),!1;i.css({"background-image":"url("+h.formatURL(a.attr("src"))+")",opacity:1}),h.measure.fbElements.call(t);var r;t.settings.immediateOpen?(n.addClass("fluidbox--opened fluidbox--loaded").find(".fluidbox__wrap").css({zIndex:t.settings.stackIndex+t.settings.stackIndexDelta}),n.trigger("openstart.fluidbox"),t.compute(),a.css({opacity:0}),e(".fluidbox__overlay").css({opacity:1}),i.one(f,function(){n.trigger("openend.fluidbox")}),r=new Image,r.onload=function(){if(n.trigger("imageloaddone.fluidbox"),1===t.instanceData.state){if(t.instanceData.thumb.natW=r.naturalWidth,t.instanceData.thumb.natH=r.naturalHeight,n.removeClass("fluidbox--loading"),h.checkURL(r.src))return t.close({error:!0}),!1;i.css({"background-image":"url("+h.formatURL(r.src)+")"}),t.compute()}},r.onerror=function(){t.close({error:!0}),n.trigger("imageloadfail.fluidbox"),n.trigger("delayedloadfail.fluidbox")},r.src=n.attr("href")):(r=new Image,r.onload=function(){return n.trigger("imageloaddone.fluidbox"),n.removeClass("fluidbox--loading").addClass("fluidbox--opened fluidbox--loaded").find(".fluidbox__wrap").css({zIndex:t.settings.stackIndex+t.settings.stackIndexDelta}),n.trigger("openstart.fluidbox"),h.checkURL(r.src)?(t.close({error:!0}),!1):(i.css({"background-image":"url("+h.formatURL(r.src)+")"}),t.instanceData.thumb.natW=r.naturalWidth,t.instanceData.thumb.natH=r.naturalHeight,t.compute(),a.css({opacity:0}),e(".fluidbox__overlay").css({opacity:1}),void i.one(f,function(){n.trigger("openend.fluidbox")}))},r.onerror=function(){t.close({error:!0}),n.trigger("imageloadfail.fluidbox")},r.src=n.attr("href"))},compute:function(){var t=this,n=e(this.element),a=n.find("img").first(),i=n.find(".fluidbox__ghost"),s=n.find(".fluidbox__wrap"),r=t.instanceData.thumb.natW,l=t.instanceData.thumb.natH,d=t.instanceData.thumb.w,u=t.instanceData.thumb.h,f=r/l,h=c.viewport.w/c.viewport.h;t.settings.maxWidth>0?(r=t.settings.maxWidth,l=r/f):t.settings.maxHeight>0&&(l=t.settings.maxHeight,r=l*f);var m,p,g,x,b;h>f?(m=l<c.viewport.h?l:c.viewport.h*t.settings.viewportFill,g=m/u,x=r*(u*g/l)/d,b=g):(p=r<c.viewport.w?r:c.viewport.w*t.settings.viewportFill,x=p/d,g=l*(d*x/r)/u,b=x),t.settings.maxWidth&&t.settings.maxHeight&&console.warn("Fluidbox: Both maxHeight and maxWidth are specified. You can only specify one. If both are specified, only the maxWidth property will be respected. This will not generate any error, but may cause unexpected sizing behavior.");var _=o.scrollTop()-a.offset().top+u*(b-1)*.5+.5*(o.height()-u*b),w=d*(b-1)*.5+.5*(o.width()-d*b)-a.offset().left,v=parseInt(100*x)/100+","+parseInt(100*g)/100;i.css({transform:"translate("+parseInt(100*w)/100+"px,"+parseInt(100*_)/100+"px) scale("+v+")",top:a.offset().top-s.offset().top,left:a.offset().left-s.offset().left}),n.find(".fluidbox__loader").css({transform:"translate("+parseInt(100*w)/100+"px,"+parseInt(100*_)/100+"px) scale("+v+")"}),n.trigger("computeend.fluidbox")},recompute:function(){this.compute()},close:function(t){var n=this,i=e(this.element),o=i.find("img").first(),s=i.find(".fluidbox__ghost"),r=i.find(".fluidbox__wrap"),l=i.find(".fluidbox__overlay"),c=e.extend(null,{error:!1},t);return null!==n.instanceData.state&&typeof n.instanceData.state!=typeof a&&0!==n.instanceData.state&&(n.instanceData.state=0,i.trigger("closestart.fluidbox"),i.removeClass(function(e,t){return(t.match(/(^|\s)fluidbox--(opened|loaded|loading)+/g)||[]).join(" ")}).addClass("fluidbox--closed"),s.css({transform:"translate(0,0) scale(1,1)",top:o.offset().top-r.offset().top+parseInt(o.css("borderTopWidth"))+parseInt(o.css("paddingTop")),left:o.offset().left-r.offset().left+parseInt(o.css("borderLeftWidth"))+parseInt(o.css("paddingLeft"))}),i.find(".fluidbox__loader").css({transform:"none"}),s.one(f,function(){s.css({opacity:0}),o.css({opacity:1}),l.remove(),r.css({zIndex:n.settings.stackIndex-n.settings.stackIndexDelta}),i.trigger("closeend.fluidbox")}),c.error&&s.trigger("transitionend"),void l.css({opacity:0}))},bindEvents:function(){var t=this;e(this.element).on("click.fluidbox",function(e){e.preventDefault(),e.stopPropagation(),t.instanceData.state&&0!==t.instanceData.state?t.close():t.open()}),s.on("keydown",function(e){27===e.keyCode&&t.close()})},bindListeners:function(){var t=this,n=e(this.element),a=function(){h.measure.viewport(),h.measure.fbElements.call(t),n.hasClass("fluidbox--opened")&&t.compute()};e.isFunction(e.throttle)?o.on("resize.fluidbox"+t.instanceData.id,e.throttle(t.settings.resizeThrottle,a)):o.on("resize.fluidbox"+t.instanceData.id,a),n.on("reposition.fluidbox",function(){t.reposition()}),n.on("recompute.fluidbox, compute.fluidbox",function(){t.compute()}),n.on("destroy.fluidbox",function(){t.destroy()}),n.on("close.fluidbox",function(){t.close()})},unbind:function(){e(this.element).off("click.fluidbox reposition.fluidbox recompute.fluidbox compute.fluidbox destroy.fluidbox close.fluidbox"),o.off("resize.fluidbox"+this.instanceData.id)},reposition:function(){h.measure.fbElements.call(this)},destroy:function(){var t=this.instanceData.originalNode;this.unbind(),e.data(this.element,"plugin_"+r,null),e(this.element).removeClass(function(e,t){return(t.match(/(^|\s)fluidbox[--|__]\S+/g)||[]).join(" ")}).empty().html(t).addClass("fluidbox--destroyed").trigger("destroyed.fluidbox")},getMetadata:function(){return this.instanceData}}),e.fn[r]=function(t){var n=arguments;if(t===a||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new i(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var o;return this.each(function(){var a=e.data(this,"plugin_"+r);a instanceof i&&"function"==typeof a[t]?o=a[t].apply(a,Array.prototype.slice.call(n,1)):console.warn('Fluidbox: The method "'+t+'" used is not defined in Fluidbox. Please make sure you are calling the correct public method.')}),o!==a?o:this}return this}}(jQuery,window,document);var Parallax={SPEED_RATIO:2,SCALE_RATIO:3500,img_cache:[],wrap_cache:[],offset_top_cache:[],count:0,init:function(){$(".parallax-img").each(function(){Parallax.img_cache.push(this),Parallax.wrap_cache.push(this.parentNode),Parallax.offset_top_cache.push(this.parentNode.offsetTop),Parallax.count++}),Parallax._refresh_y_offsets()},update:function(){for(var e=window.pageYOffset,t=0;t<Parallax.count;t++){var n=Parallax.img_cache[t],a=e-Parallax.offset_top_cache[t],i=a/Parallax.SPEED_RATIO,o=1+Math.max(a/Parallax.SCALE_RATIO,0);Parallax._translate_y_and_scale(n,i,o)}},_translate_y_and_scale:function(e,t){var n="translate3d(0,"+t+"px, 0)";IS_FIREFOX&&(n+=" rotate(0.01deg)"),e.style["-webkit-transform"]=n,e.style["-moz-transform"]=n,e.style["-ms-transform"]=n,e.style["-o-transform"]=n,e.style.transform=n},_refresh_y_offsets:function(){for(var e=0;e<Parallax.count;e++)Parallax.offset_top_cache[e]=Parallax.wrap_cache[e].offsetTop}};jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,a,i){return jQuery.easing[jQuery.easing.def](e,t,n,a,i)},easeInOutExpo:function(e,t,n,a,i){return 0==t?n:t==i?n+a:(t/=i/2)<1?a/2*Math.pow(2,10*(t-1))+n:a/2*(2-Math.pow(2,-10*--t))+n}}),$(document).ready(function(){function e(){requestAnimationFrame(e),Parallax.update()}function t(){console.log("manually_set_masthead_height"),IS_ANDROID_MOBILE&&$("#masthead").height(.91*$(window).height())}function n(e){$("#contact_form input, #contact_form textarea, #contact_form button").prop("disabled",e),e?($("#contact_form .thanks").show(),$("#contact_form .error").hide()):($("#contact_form .thanks").hide(),$("#contact_form .error").show())}Parallax.init(),IS_SAFARI_IOS_7||requestAnimationFrame(e),$("header > nav > ul > li > a").hover(function(){$(this).parent().siblings("li").children("a").addClass("blur"),$("#header > .name").find("*").addClass("blur")},function(){$(this).parent().siblings("li").children("a").removeClass("blur"),$("#header > .name").find("*").removeClass("blur")}),$("#header > .name > a").hover(function(){$("header > nav > ul > li > a").addClass("blur")},function(){$("header > nav > ul > li > a").removeClass("blur")}),$("a.popout-lightbox").fluidbox(),$("body").append($("nav").clone().addClass("pushy pushy-left")),pushy_init(),t();var a=!1;$(window).resize(function(){Parallax._refresh_y_offsets(),debounced_masonry(),a&&IS_ANDROID_MOBILE&&(t(),a=!1)}),$(window).on("orientationchange",function(){IS_ANDROID_MOBILE&&($("#masthead").removeAttr("style"),a=!0)}),$(".blog-masonry-post article").hover(function(){var e=$(this).find(".post-header")[0];Parallax._translate_y_and_scale(e,0,1.2),$(e).find(".darken-filter").addClass("less")},function(){var e=$(this).find(".post-header")[0];Parallax._translate_y_and_scale(e,0,1),$(e).find(".darken-filter").removeClass("less")});var i=$("footer time");i.text(humanized_time_span(+i.attr("datetime")));var o=["preventDefault","hide","#contact_form .thanks","#contact_form .error","POST","Vy1PuWd7wo8waGjlUCkOS88VZhhskOyueZyjiRXR","gzdK9mMNsyVtHAjhmLnmn29jFZN8zGRFTcHyC817","https://api.parse.com/1/functions/sendEmail","text/plain","val","#name","#email","#subject","#message","hostname","location","stringify","result","ok","ajax","submit","#contact_form > form"];$(o[21])[o[20]](function(e){e[o[0]](),$(o[2])[o[1]](),$(o[3])[o[1]](),$[o[19]]({type:o[4],headers:{"X-Parse-Application-Id":o[5],"X-Parse-REST-API-Key":o[6]},url:o[7],contentType:o[8],data:JSON[o[16]]({name:$(o[10])[o[9]](),email:$(o[11])[o[9]](),subject:$(o[12])[o[9]](),message:$(o[13])[o[9]](),hostname:window[o[15]][o[14]]}),success:function(e){n(e[o[17]]===o[18])},error:function(){n(!1)}})}),$("nav li a, #contact-hear").click(function(e){var t=$(this);null!=t.attr("href")&&"#"==t.attr("href")[0]&&(scrollTo(t.attr("href")),e.preventDefault())}),""!=location.hash&&"#"==location.hash[0]&&(scrollTo(location.hash),history.pushState("",document.title,window.location.pathname))});