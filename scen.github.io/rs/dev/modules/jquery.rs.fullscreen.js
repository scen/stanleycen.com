!function($){"use strict";$.extend($.rsProto,{_initFullscreen:function(){var self=this;self._fullscreenDefaults={enabled:!1,keyboardNav:!0,buttonFS:!0,nativeFS:!1,doubleTap:!0},self.st.fullscreen=$.extend({},self._fullscreenDefaults,self.st.fullscreen),self.st.fullscreen.enabled&&self.ev.one("rsBeforeSizeSet",function(){self._setupFullscreen()})},_setupFullscreen:function(){var self=this;if(self._fsKeyboard=!self.st.keyboardNavEnabled&&self.st.fullscreen.keyboardNav,self.st.fullscreen.nativeFS){self._fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var browserPrefixes="webkit moz o ms khtml".split(" ");if(!self.isAndroid)if("undefined"!=typeof document.cancelFullScreen)self._fullScreenApi.supportsFullScreen=!0;else for(var i=0;i<browserPrefixes.length;i++)if(self._fullScreenApi.prefix=browserPrefixes[i],"undefined"!=typeof document[self._fullScreenApi.prefix+"CancelFullScreen"]){self._fullScreenApi.supportsFullScreen=!0;break}self._fullScreenApi.supportsFullScreen?(self.nativeFS=!0,self._fullScreenApi.fullScreenEventName=self._fullScreenApi.prefix+"fullscreenchange"+self.ns,self._fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},self._fullScreenApi.requestFullScreen=function(el){return""===this.prefix?el.requestFullScreen():el[this.prefix+"RequestFullScreen"]()},self._fullScreenApi.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):self._fullScreenApi=!1}self.st.fullscreen.buttonFS&&(self._fsBtn=$('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(self._controlsContainer).on("click.rs",function(){self.isFullscreen?self.exitFullscreen():self.enterFullscreen()}))},enterFullscreen:function(preventNative){var self=this;if(self._fullScreenApi){if(!preventNative)return self._doc.on(self._fullScreenApi.fullScreenEventName,function(){self._fullScreenApi.isFullScreen()?self.enterFullscreen(!0):self.exitFullscreen(!0)}),void self._fullScreenApi.requestFullScreen($("html")[0]);self._fullScreenApi.requestFullScreen($("html")[0])}if(!self._isFullscreenUpdating){self._isFullscreenUpdating=!0,self._doc.on("keyup"+self.ns+"fullscreen",function(e){27===e.keyCode&&self.exitFullscreen()}),self._fsKeyboard&&self._bindKeyboardNav();var win=$(window);self._fsScrollTopOnEnter=win.scrollTop(),self._fsScrollLeftOnEnter=win.scrollLeft(),self._htmlStyle=$("html").attr("style"),self._bodyStyle=$("body").attr("style"),self._sliderStyle=self.slider.attr("style"),$("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"}),self.slider.addClass("rsFullscreen");var item,i;for(i=0;i<self.numSlides;i++)item=self.slides[i],item.isRendered=!1,item.bigImage&&(item.isBig=!0,item.isMedLoaded=item.isLoaded,item.isMedLoading=item.isLoading,item.medImage=item.image,item.medIW=item.iW,item.medIH=item.iH,item.slideId=-99,item.bigImage!==item.medImage&&(item.sizeType="big"),item.isLoaded=item.isBigLoaded,item.isLoading=!1,item.image=item.bigImage,item.images[0]=item.bigImage,item.iW=item.bigIW,item.iH=item.bigIH,item.isAppended=item.contentAdded=!1,self._updateItemSrc(item));self.isFullscreen=!0,self._isFullscreenUpdating=!1,self.updateSliderSize(),self.ev.trigger("rsEnterFullscreen")}},exitFullscreen:function(preventNative){var self=this;if(self._fullScreenApi){if(!preventNative)return void self._fullScreenApi.cancelFullScreen($("html")[0]);self._doc.off(self._fullScreenApi.fullScreenEventName)}if(!self._isFullscreenUpdating){self._isFullscreenUpdating=!0,self._doc.off("keyup"+self.ns+"fullscreen"),self._fsKeyboard&&self._doc.off("keydown"+self.ns),$("html").attr("style",self._htmlStyle||""),$("body").attr("style",self._bodyStyle||"");var item,i;for(i=0;i<self.numSlides;i++)item=self.slides[i],item.isRendered=!1,item.bigImage&&(item.isBig=!1,item.slideId=-99,item.isBigLoaded=item.isLoaded,item.isBigLoading=item.isLoading,item.bigImage=item.image,item.bigIW=item.iW,item.bigIH=item.iH,item.isLoaded=item.isMedLoaded,item.isLoading=!1,item.image=item.medImage,item.images[0]=item.medImage,item.iW=item.medIW,item.iH=item.medIH,item.isAppended=item.contentAdded=!1,self._updateItemSrc(item,!0),item.bigImage!==item.medImage&&(item.sizeType="med"));self.isFullscreen=!1;var win=$(window);win.scrollTop(self._fsScrollTopOnEnter),win.scrollLeft(self._fsScrollLeftOnEnter),self._isFullscreenUpdating=!1,self.slider.removeClass("rsFullscreen"),self.updateSliderSize(),setTimeout(function(){self.updateSliderSize()},1),self.ev.trigger("rsExitFullscreen")}},_updateItemSrc:function(item){var newHTML=item.isLoaded||item.isLoading?'<img class="rsImg rsMainSlideImage" src="'+item.image+'"/>':'<a class="rsImg rsMainSlideImage" href="'+item.image+'"></a>';item.content.hasClass("rsImg")?item.content=$(newHTML):item.content.find(".rsImg").eq(0).replaceWith(newHTML),item.isLoaded||item.isLoading||!item.holder||item.holder.html(item.content)}}),$.rsModules.fullscreen=$.rsProto._initFullscreen}(jQuery);