!function($){"use strict";$.extend($.rsProto,{_initThumbs:function(){var self=this;"thumbnails"===self.st.controlNavigation&&(self._thumbsDefaults={drag:!0,touch:!0,orientation:"horizontal",navigation:!0,arrows:!0,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:!1,appendSpan:!1,transitionSpeed:600,autoCenter:!0,fitInViewport:!0,firstMargin:!0,paddingTop:0,paddingBottom:0},self.st.thumbs=$.extend({},self._thumbsDefaults,self.st.thumbs),self._firstThumbMoved=!0,self.st.thumbs.firstMargin===!1?self.st.thumbs.firstMargin=0:self.st.thumbs.firstMargin===!0&&(self.st.thumbs.firstMargin=self.st.thumbs.spacing),self.ev.on("rsBeforeParseNode",function(e,content,obj){content=$(content),obj.thumbnail=content.find(".rsTmb").remove(),obj.thumbnail.length?obj.thumbnail=$(document.createElement("div")).append(obj.thumbnail).html():(obj.thumbnail=content.attr("data-rsTmb"),obj.thumbnail||(obj.thumbnail=content.find(".rsImg").attr("data-rsTmb")),obj.thumbnail=obj.thumbnail?'<img src="'+obj.thumbnail+'"/>':"")}),self.ev.one("rsAfterPropsSetup",function(){self._createThumbs()}),self._prevNavItem=null,self.ev.on("rsOnUpdateNav",function(){var currItem=$(self._controlNavItems[self.currSlideId]);currItem!==self._prevNavItem&&(self._prevNavItem&&(self._prevNavItem.removeClass("rsNavSelected"),self._prevNavItem=null),self._thumbsNavigation&&self._setCurrentThumb(self.currSlideId),self._prevNavItem=currItem.addClass("rsNavSelected"))}),self.ev.on("rsOnAppendSlide",function(e,parsedSlide,index){var html="<div"+self._thumbsMargin+' class="rsNavItem rsThumb">'+self._addThumbHTML+parsedSlide.thumbnail+"</div>";index>=self.numSlides?self._thumbsContainer.append(html):self._controlNavItems.eq(index).before(html),self._controlNavItems=self._thumbsContainer.children(),self.updateThumbsSize()}),self.ev.on("rsOnRemoveSlide",function(e,index){var itemToRemove=self._controlNavItems.eq(index);itemToRemove&&(itemToRemove.remove(),self._controlNavItems=self._thumbsContainer.children(),self.updateThumbsSize())}))},_createThumbs:function(){var style,item,self=this,tText="rsThumbs",thumbSt=self.st.thumbs,out="",spacing=thumbSt.spacing;self._controlNavEnabled=!0,self._thumbsHorizontal="vertical"===thumbSt.orientation?!1:!0,self._thumbsMargin=style=spacing?' style="margin-'+(self._thumbsHorizontal?"right":"bottom")+":"+spacing+'px;"':"",self._thumbsPosition=0,self._isThumbsAnimating=!1,self._thumbsDrag=!1,self._thumbsNavigation=!1,self._thumbsArrows=thumbSt.arrows&&thumbSt.navigation;var pl=self._thumbsHorizontal?"Hor":"Ver";self.slider.addClass("rsWithThumbs rsWithThumbs"+pl),out+='<div class="rsNav rsThumbs rsThumbs'+pl+'"><div class="'+tText+'Container">',self._addThumbHTML=thumbSt.appendSpan?'<span class="thumbIco"></span>':"";for(var i=0;i<self.numSlides;i++)item=self.slides[i],out+="<div"+style+' class="rsNavItem rsThumb">'+item.thumbnail+self._addThumbHTML+"</div>";out=$(out+"</div></div>");var o={};thumbSt.paddingTop&&(o[self._thumbsHorizontal?"paddingTop":"paddingLeft"]=thumbSt.paddingTop),thumbSt.paddingBottom&&(o[self._thumbsHorizontal?"paddingBottom":"paddingRight"]=thumbSt.paddingBottom),out.css(o),self._thumbsContainer=$(out).find("."+tText+"Container"),self._thumbsArrows&&(tText+="Arrow",thumbSt.arrowLeft?self._thumbsArrowLeft=thumbSt.arrowLeft:(self._thumbsArrowLeft=$('<div class="'+tText+" "+tText+'Left"><div class="'+tText+'Icn"></div></div>'),out.append(self._thumbsArrowLeft)),thumbSt.arrowRight?self._thumbsArrowRight=thumbSt.arrowRight:(self._thumbsArrowRight=$('<div class="'+tText+" "+tText+'Right"><div class="'+tText+'Icn"></div></div>'),out.append(self._thumbsArrowRight)),self._thumbsArrowLeft.click(function(){var thumbId=(Math.floor(self._thumbsViewportSize/self._thumbSize),Math.floor(self._thumbsPosition/self._thumbSize)),newPos=(thumbId+self._visibleThumbsPerView)*self._thumbSize;self._animateThumbsTo(newPos>self._thumbsMinPosition?self._thumbsMinPosition:newPos)}),self._thumbsArrowRight.click(function(){var thumbId=(Math.floor(self._thumbsViewportSize/self._thumbSize),Math.floor(self._thumbsPosition/self._thumbSize)),newPos=(thumbId-self._visibleThumbsPerView)*self._thumbSize;self._animateThumbsTo(newPos<self._thumbsMaxPosition?self._thumbsMaxPosition:newPos)}),thumbSt.arrowsAutoHide&&!self.hasTouch&&(self._thumbsArrowLeft.css("opacity",0),self._thumbsArrowRight.css("opacity",0),out.one("mousemove.rsarrowshover",function(){self._thumbsNavigation&&(self._thumbsArrowLeft.css("opacity",1),self._thumbsArrowRight.css("opacity",1))}),out.hover(function(){self._thumbsNavigation&&(self._thumbsArrowLeft.css("opacity",1),self._thumbsArrowRight.css("opacity",1))},function(){self._thumbsNavigation&&(self._thumbsArrowLeft.css("opacity",0),self._thumbsArrowRight.css("opacity",0))}))),self._controlNav=out,self._controlNavItems=self._thumbsContainer.children(),self.msEnabled&&self.st.thumbs.navigation&&self._thumbsContainer.css("-ms-touch-action",self._thumbsHorizontal?"pan-y":"pan-x"),self.slider.append(out),self._thumbsEnabled=!0,self._thumbsSpacing=spacing,thumbSt.navigation&&self._useCSS3Transitions&&self._thumbsContainer.css(self._vendorPref+"transition-property",self._vendorPref+"transform"),self._controlNav.on("click.rs",".rsNavItem",function(){self._thumbsDrag||self.goTo($(this).index())}),self.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){self._realWrapSize=self._thumbsHorizontal?self._wrapHeight:self._wrapWidth,self.updateThumbsSize(!0)})},updateThumbsSize:function(){var self=this,firstThumb=self._controlNavItems.first(),cssObj={},numItems=self._controlNavItems.length;if(self._thumbSize=(self._thumbsHorizontal?firstThumb.outerWidth():firstThumb.outerHeight())+self._thumbsSpacing,self._thumbsContainerSize=numItems*self._thumbSize-self._thumbsSpacing,cssObj[self._thumbsHorizontal?"width":"height"]=self._thumbsContainerSize+self._thumbsSpacing,self._thumbsViewportSize=self._thumbsHorizontal?self._controlNav.width():self._controlNav.height(),self._thumbsMaxPosition=-(self._thumbsContainerSize-self._thumbsViewportSize)-self.st.thumbs.firstMargin,self._thumbsMinPosition=self.st.thumbs.firstMargin,self._visibleThumbsPerView=Math.floor(self._thumbsViewportSize/self._thumbSize),self._thumbsContainerSize<self._thumbsViewportSize){if(self.st.thumbs.autoCenter&&self._setThumbsPosition((self._thumbsViewportSize-self._thumbsContainerSize)/2),self.st.thumbs.arrows&&self._thumbsArrowLeft){var arrDisClass="rsThumbsArrowDisabled";self._thumbsArrowLeft.addClass(arrDisClass),self._thumbsArrowRight.addClass(arrDisClass)}self._thumbsNavigation=!1,self._thumbsDrag=!1,self._controlNav.off(self._downEvent)}else self.st.thumbs.navigation&&!self._thumbsNavigation&&(self._thumbsNavigation=!0,(!self.hasTouch&&self.st.thumbs.drag||self.hasTouch&&self.st.thumbs.touch)&&(self._thumbsDrag=!0,self._controlNav.on(self._downEvent,function(e){self._onDragStart(e,!0)})));self._useCSS3Transitions&&(cssObj[self._vendorPref+"transition-duration"]="0ms"),self._thumbsContainer.css(cssObj),self._thumbsEnabled&&(self.isFullscreen||self.st.thumbs.fitInViewport)&&(self._thumbsHorizontal?self._wrapHeight=self._realWrapSize-self._controlNav.outerHeight():self._wrapWidth=self._realWrapSize-self._controlNav.outerWidth())},setThumbsOrientation:function(newPlacement,dontUpdateSize){var self=this;self._thumbsEnabled&&(self.st.thumbs.orientation=newPlacement,self._controlNav.remove(),self.slider.removeClass("rsWithThumbsHor rsWithThumbsVer"),self._createThumbs(),self._controlNav.off(self._downEvent),dontUpdateSize||self.updateSliderSize(!0))},_setThumbsPosition:function(pos){var self=this;self._thumbsPosition=pos,self._useCSS3Transitions?self._thumbsContainer.css(self._xProp,self._tPref1+(self._thumbsHorizontal?pos+self._tPref2+0:0+self._tPref2+pos)+self._tPref3):self._thumbsContainer.css(self._thumbsHorizontal?self._xProp:self._yProp,pos)},_animateThumbsTo:function(pos,speed,outEasing,bounceAnimPosition,bounceAnimSpeed){var self=this;if(self._thumbsNavigation){speed||(speed=self.st.thumbs.transitionSpeed),self._thumbsPosition=pos,self._thumbsAnimTimeout&&clearTimeout(self._thumbsAnimTimeout),self._isThumbsAnimating&&(self._useCSS3Transitions||self._thumbsContainer.stop(),outEasing=!0);var animObj={};self._isThumbsAnimating=!0,self._useCSS3Transitions?(animObj[self._vendorPref+"transition-duration"]=speed+"ms",animObj[self._vendorPref+"transition-timing-function"]=outEasing?$.rsCSS3Easing[self.st.easeOut]:$.rsCSS3Easing[self.st.easeInOut],self._thumbsContainer.css(animObj),self._setThumbsPosition(pos)):(animObj[self._thumbsHorizontal?self._xProp:self._yProp]=pos+"px",self._thumbsContainer.animate(animObj,speed,outEasing?"easeOutCubic":self.st.easeInOut)),bounceAnimPosition&&(self._thumbsPosition=bounceAnimPosition),self._updateThumbsArrows(),self._thumbsAnimTimeout=setTimeout(function(){self._isThumbsAnimating=!1,bounceAnimSpeed&&(self._animateThumbsTo(bounceAnimPosition,bounceAnimSpeed,!0),bounceAnimSpeed=null)},speed)}},_updateThumbsArrows:function(){var self=this;if(self._thumbsArrows){var arrDisClass="rsThumbsArrowDisabled";self._thumbsPosition===self._thumbsMinPosition?self._thumbsArrowLeft.addClass(arrDisClass):self._thumbsArrowLeft.removeClass(arrDisClass),self._thumbsPosition===self._thumbsMaxPosition?self._thumbsArrowRight.addClass(arrDisClass):self._thumbsArrowRight.removeClass(arrDisClass)}},_setCurrentThumb:function(id,justSet){var newPos,self=this,incr=0,nextThumbEndPos=id*self._thumbSize+2*self._thumbSize-self._thumbsSpacing+self._thumbsMinPosition,thumbId=Math.floor(self._thumbsPosition/self._thumbSize);if(self._thumbsNavigation){if(self._firstThumbMoved&&(justSet=!0,self._firstThumbMoved=!1),nextThumbEndPos+self._thumbsPosition>self._thumbsViewportSize?(id===self.numSlides-1&&(incr=1),thumbId=-id+self._visibleThumbsPerView-2+incr,newPos=thumbId*self._thumbSize+self._thumbsViewportSize%self._thumbSize+self._thumbsSpacing-self._thumbsMinPosition):0!==id?(id-1)*self._thumbSize<=-self._thumbsPosition+self._thumbsMinPosition&&id-1<=self.numSlides-self._visibleThumbsPerView&&(thumbId=-id+1,newPos=thumbId*self._thumbSize+self._thumbsMinPosition):(thumbId=0,newPos=self._thumbsMinPosition),newPos!==self._thumbsPosition){var checkPos=void 0===newPos?self._thumbsPosition:newPos;checkPos>self._thumbsMinPosition?self._setThumbsPosition(self._thumbsMinPosition):checkPos<self._thumbsMaxPosition?self._setThumbsPosition(self._thumbsMaxPosition):void 0!==newPos&&(justSet?self._setThumbsPosition(newPos):self._animateThumbsTo(newPos))}self._updateThumbsArrows()}}}),$.rsModules.thumbnails=$.rsProto._initThumbs}(jQuery);