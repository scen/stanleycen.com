<!doctype html> <html> <head> <title> Facebook Messaging Analytics &mdash; Stanley Cen </title> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> <link rel="author" href="/humans.txt"/> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'/> <link href="//cdnjs.cloudflare.com/ajax/libs/normalize/2.1.3/normalize.min.css" rel="stylesheet" type="text/css"/> <link href="/main.css" rel="stylesheet" type="text/css"/> <link href="/fontello.css" rel="stylesheet" type="text/css"/> <link type="text/css" rel="stylesheet" href="/fancybox/jquery.fancybox.css"/> <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" defer></script> <script src="/jquery.mobiledetect.js" defer></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js" defer></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.form/3.45/jquery.form.min.js" defer></script> <script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js" defer></script> <script src="/main.js" defer></script> <script type="text/javascript">
var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-4253037-6"]),_gaq.push(["_setDomainName","stanleycen.com"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();var _paq=_paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="http://lake.stanleycen.com:8080/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId",1]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.defer=!0,p.src=e+"piwik.js",t.parentNode.insertBefore(p,t)}();window.heap=window.heap||[],heap.load=function(t,e){window.heap.appid=t,window.heap.config=e;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(t){return function(){heap.push([t].concat(Array.prototype.slice.call(arguments,0)))}},p=["identify","track"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])}; heap.load("3908329247");
		</script> <noscript><p><img src="http://lake.stanleycen.com:8080/piwik.php?idsite=1" style="border:0;" alt=""/></p></noscript> </head> <body> <div id="wrapall"> <header id="header" class="hide-nav"> <a class="navicon-button"> <div class="navicon"></div> </a> <h1><a href="/">stanley cen</a></h1> <nav> <ul> <li><a href="/#projects" class="projects">projects</a></li> <li><a href="/blog" class="blog selected">blog</a></li> <li><a href="/#about" class="about">about</a></li> <li><a href="/#contact" class="contact">contact</a></li> <li><a href="http://github.com/scen/" class="github">github</a></li> </ul> </nav> </header> <div id="contentall"> <div style='height:52px'></div> <div id="blog_internal"> <div class="header parallax"> <h1 class="header">Blog</h1> </div> <div class="content"> <div class="blog-post "> <div class="masthead"> <div class="title"> <h1><a href="/blog/facebook-messaging-analytics">Facebook Messaging Analytics</a></h1> </div> <div class="date"> <time>June 18, 2013</time> </div> </div> <div class="body"> <p>Check out the newer android equivalent <a href="/blog/facebook-messaging-analytics-android">here</a>!</p> <p>A couple of days ago I had an urge to look at my activity over Facebook messaging, a service I use quite often. Facebook doesn't provide an interface to easily view information about my chats, nor do they provide a method to easily and quickly download your up-to-date chat data.</p> <p>I wrote a open-source and purely client-side tool to download all my data through the Facebook Graph API and compute statistics on it to provide insights into my chatting activity (GitHub repository as well as installation instructions are available <a href="/project/facebook-messaging-analytics">here</a>). Here are a few examples of what it can show right now:</p> <p><div class="center hover expand photo" style="max-width: 300px"> <a class="lightbox popout-lightbox" href="http://res.cloudinary.com/hazdcamql/image/upload/wordcloud_pardki.png" title="Word cloud" target="_blank"><img src="http://res.cloudinary.com/hazdcamql/image/upload/wordcloud_pardki.png" alt="Word cloud" style="max-width: 100%"></a><div class="caption"><span>Word cloud</span></div> </div><div class="center hover expand photo" style="max-width: 300px"> <a class="lightbox popout-lightbox" href="http://res.cloudinary.com/hazdcamql/image/upload/distribution_cuk8tr.png" title="Message distribution" target="_blank"><img src="http://res.cloudinary.com/hazdcamql/image/upload/distribution_cuk8tr.png" alt="Message distribution" style="max-width: 100%"></a><div class="caption"><span>Message distribution</span></div> </div></p> <p><div class="center hover expand photo" style="max-width: 300px"> <a class="lightbox popout-lightbox" href="http://res.cloudinary.com/hazdcamql/image/upload/trends_z0fvlo.png" title="Trends over time" target="_blank"><img src="http://res.cloudinary.com/hazdcamql/image/upload/trends_z0fvlo.png" alt="Trends over time" style="max-width: 100%"></a><div class="caption"><span>Trends over time</span></div> </div></p> <p><div class="center hover expand photo" style="max-width: 300px"> <a class="lightbox popout-lightbox" href="http://res.cloudinary.com/hazdcamql/image/upload/mostactive_icmony.png" title="Most active time" target="_blank"><img src="http://res.cloudinary.com/hazdcamql/image/upload/mostactive_icmony.png" alt="Most active time" style="max-width: 100%"></a><div class="caption"><span>Most active time</span></div> </div></p> <p>In order to download all of the messages, I had to use the Facebook API. The Facebook Graph API is slow and generally hard to use. You have to traverse each conversation page-by-page, loading at most 25 messages per API call. Facebook also limits API calls to around 300 per 600 seconds for this specific table. In order to store the sheer amount (8 MB+) of text data, I store the collected data as a JSON string inside of a permanent sandboxed file system (it won't fit into <code>localStorage</code>). As a result, only Google Chrome is supported at this time. The user can download the collected data as a file into the actual filesystem and upload a backup data file into the tool.</p> <p>The tool written in HTML, CSS, and Javascript. Anyone can easily deploy it by downloading the zip and starting a local file server. The tool uses my Facebook application to authenticate and acquire the <code>read_mailbox</code> permission needed to download messages. If you'd rather use your own application id (even though the source code is available) online, you can alter <code>visualizer.js</code>.</p> <p>A copy of the <code>master</code> branch of the tool is hosted on my website <a href="http://fbstats.stanleycen.com/fbstats">here</a>. It is fully functional as the entire application does not rely on any server-side processing.</p> <p>The tool is currently still in development. If you find any bugs, please let me know by <a href="http://github.com/scen/fbstats/issues">reporting an issue</a> on GitHub.</p> <p>The updated blog post for this version is <a href="/blog/facebook-messaging-analytics-update">here</a>.</p> </div> </div> <style>.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #888888 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.il { color: #666666 } /* Literal.Number.Integer.Long */</style> </div> </div> </div> <footer> <div class="bar"> <div class="wrapper"> <span class="copyleft"> Designed with &lt;3 by Stanley Cen </span> <span class="latest-commit"> Running latest commit <a href="https://github.com/scen/stanleycen.com/commit/90bb875ad6c5c552b93be6dbfd66c67a06df458f"> 90bb875</a> 5 seconds ago: "Add viewport height support" </span> </div> </div> </footer> </div> </body> </html>